schema_version: 1
name: eap
description: "Installs base EAP to the image"
version: '1.0'

modules:
      install:
          ### Image :: Standalone ####
          - name: eap-740-beta
            version: "7.4.0.Beta"
          - name: eap-74-beta-galleon-latest
          - name: jboss.container.eap.setup
          - name: eap-install-cleanup


          ### Image :: OpenShift ####
          # Order of the modules installation below matters!!! DO NOT CHANGE it unless
          # you first verified the image with changed order still works correctly
          # Common modules from the main CE cct_module repository
          - name: jboss.container.maven.default
          - name: dynamic-resources
            version: '1.0'
          - name: jboss.container.eap.s2i.galleon
          - name: jboss.container.eap.galleon
          - name: jboss.container.eap.galleon.config.ee
          - name: jboss.container.eap.galleon.build-settings
            version: "public"
          - name: jboss.container.eap.openshift.modules
          - name: jboss.container.java.jvm.bash
          - name: jboss.container.eap.launch
          - name: jboss.container.wildfly.launch.admin
          - name: jboss.container.wildfly.launch.access-log-valve
          - name: jboss.container.wildfly.launch-config.config
          - name: jboss.container.wildfly.launch-config.os
          - name: jboss.container.wildfly.launch.datasources
          - name: jboss.container.wildfly.launch.extensions
          - name: jboss.container.wildfly.launch.json-logging
          - name: jboss.container.wildfly.launch.jgroups
          - name: jboss.container.wildfly.launch.filters
          - name: jboss.container.wildfly.launch.logger-category
          - name: jboss.container.wildfly.launch.os.node-name
          - name: jboss.container.wildfly.launch.deployment-scanner
          - name: jboss.container.wildfly.launch.keycloak
          - name: jboss.container.wildfly.launch.https
          - name: jboss.container.wildfly.launch.security-domains
          - name: jboss.container.wildfly.launch.elytron
          - name: jboss.container.wildfly.launch.port-offset
          - name: jboss.container.wildfly.launch.resource-adapters
          - name: jboss.container.wildfly.launch.messaging
          - name: jboss.container.wildfly.launch.statefulset
          - name: jboss.container.wildfly.galleon.fp-content.jolokia
          - name: jboss.container.wildfly.galleon.fp-content.java
          - name: jboss.container.wildfly.galleon.fp-content.config
          - name: jboss.container.wildfly.galleon.fp-content.mvn
          - name: jboss.container.wildfly.galleon.fp-content.ejb-tx-recovery
          - name: os-eap-probes
            version: "3.0"
          # We keep this one to only advertise that hawkular is no more supported.
          - name: jboss.container.eap.hawkular

#          - name: jboss.container.eap.s2i.bash
#          - name: jboss.container.java.jvm.bash
#          - name: jboss.container.jolokia.bash
#          - name: jboss.container.wildfly.standalone-conf.java
#          - name: jboss.container.wildfly.standalone-conf.jolokia
#          - name: os-eap7-ping
#          - name: jboss.container.java.jvm.bash
#          - name: os-eap-launch
#          - name: os-eap7-launch
#          - name: os-eap-datasource
#            version: '1.0'
#          - name: jboss.eap.cd.logging
#          - name: jboss.eap.config.jgroups
#          - name: jboss.eap.config.elytron
#          - name: os-eap-probes
#            version: '3.0'
#          - name: jboss.container.maven.35.bash
#            version: '3.5'
#          - name: os-eap-hawkular
#          - name: os-eap-deployment-scanner

execute:
    - script: install-eap-one-offs.sh

# All EAP one-offs artifacts must be prefixed with "eap-one-off-" prefix and suffixed with in ".zip".
# Ensure that only one-offs for the INSTALLED version of EAP are present, and comment all of them
# that are obsoleted.
# artifacts:
#
#      KEYCLOAK-13487 "jbeap-18807.zip" is obsolete in EAP-7.3.1 / RH-SSO 7.5.1, deprecate it
#
#      - md5: 1b6036cfcde2cf1dc05c2eb6eca228ff
#        name: jbeap-18807.zip
#        target: eap-one-off-jbeap-18807.zip
#        url: http://$DOWNLOAD_SERVER/devel/candidates/JBSSO/JBSSO-7.5.0.CR2/jbeap-18807.zip
