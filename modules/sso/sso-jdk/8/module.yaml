schema_version: 1
name: sso-jdk
description: "Installs the JDK Java SDK 8."
version: "8"

labels:
- name: "org.jboss.product"
  value: "openjdk"
- name: "org.jboss.product.version"
  value: "1.8.0"
- name: "org.jboss.product.openjdk.version"
  value: "1.8.0"

envs:
- name: "JAVA_HOME"
  value: "/usr/lib/jvm/java-1.8.0"
- name: "JAVA_VENDOR"
  value: "openjdk"
- name: "JAVA_VERSION"
  value: "1.8.0"
- name: JBOSS_CONTAINER_OPENJDK_JDK_MODULE
  value: /opt/jboss/container/openjdk/jdk

packages:
  install:
  - java-1.8.0-`[[ ($(uname -i) = ppc64le) || ($(uname -i) = s390x) ]] && echo openj9 || echo openjdk`-devel

modules:
  install:
  - name: sso.security.cve-2020-10695
    version: '1.0'
  # Moreover, list JDK-8 overrides required / expected by EAP image modules below. See modules listed in:
  # https://github.com/jboss-container-images/jboss-eap-7-openshift-image/blob/eap74-dev/rel-jdk8-overrides.yaml
  # for details.
  #
  # Note: The 'jboss.container.openjdk.jdk' & 'jboss.container.maven' modules from that list
  #       were intentionally omitted below, since RH-SSO images handles actions performed by
  #       those modules differently.
  - name: jboss.container.eap.galleon.build-settings
    version: "osbs"
  - name: os-eap-txnrecovery.run
    version: 'python2'
  - name: os-eap-probes
    version: "2.0"
  - name: jboss.container.jolokia
    version: '7'
  - name: jboss.container.prometheus
    version: '7'

execute:
- script: configure.sh
